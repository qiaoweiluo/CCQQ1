(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[8],{520:function(e,a,t){},521:function(e,a,t){e.exports=t.p+"static/media/avatar02.ab24c092.png"},522:function(e,a,t){e.exports=t.p+"static/media/join.60f81205.png"},530:function(e,a,t){"use strict";t.r(a);t(514);var n=t(516),c=t.n(n),s=t(15),l=t.n(s),r=t(19),i=t(20),o=t(23),m=t(21),u=t(24),p=t(0),f=t.n(p),E=(t(520),t(521)),g=t.n(E),v=t(522),d=t.n(v),h=t(43),k=function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).fnGetUserInfo=function(){var e,a,n,c;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(!localStorage.getItem("haoke_token")){s.next=7;break}return s.next=4,l.a.awrap(t.axios.get("/user"));case 4:e=s.sent,a=e.data,n=a.status,c=a.body,200===n&&t.setState({avatar:c.avatar,nickname:c.nickname,bIsLogin:!0});case 7:case"end":return s.stop()}}))},t.fnLogOut=function(){c.a.alert("\u7528\u6237\u9000\u51fa","\u4f60\u786e\u8ba4\u9000\u51fa\u5417?",[{text:"\u53d6\u6d88"},{text:"\u786e\u5b9a",onPress:function(){var e;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.a.awrap(t.axios.post("/user/logout"));case 2:e=a.sent,200===e.data.status&&(t.setState({avatar:"",nickname:"",bIsLogin:!1}),localStorage.removeItem("haoke_token"));case 5:case"end":return a.stop()}}))}}])},t.state={avatar:"",nickname:"",bIsLogin:!1},t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){this.fnGetUserInfo()}},{key:"render",value:function(){var e=this,a=this.state,t=a.bIsLogin,n=a.avatar,c=a.nickname;return f.a.createElement("div",{className:"user_wrap"},f.a.createElement("div",{className:"user_header"},t?f.a.createElement("div",{className:"info_pannel"},f.a.createElement("img",{src:h.a+n,alt:""}),f.a.createElement("div",{className:"role"},c),f.a.createElement("span",{className:"gologin",onClick:this.fnLogOut},"\u9000\u51fa")):f.a.createElement("div",{className:"info_pannel"},f.a.createElement("img",{src:g.a,alt:""}),f.a.createElement("div",{className:"role"},"\u6e38\u5ba2"),f.a.createElement("span",{className:"gologin",onClick:function(){return e.props.history.push("/login")}},"\u53bb\u767b\u5f55"))),f.a.createElement("ul",{className:"opt_list"},f.a.createElement("li",null,f.a.createElement("i",{className:"iconfont icon-shoucang"}),f.a.createElement("span",null,"\u6211\u7684\u6536\u85cf")),f.a.createElement("li",null,f.a.createElement("i",{className:"iconfont icon-home"}),f.a.createElement("span",null,"\u6211\u7684\u51fa\u79df")),f.a.createElement("li",null,f.a.createElement("i",{className:"iconfont icon-shijian"}),f.a.createElement("span",null,"\u770b\u623f\u8bb0\u5f55")),f.a.createElement("li",null,f.a.createElement("i",{className:"iconfont icon-fangdong"}),f.a.createElement("span",null,"\u6210\u4e3a\u623f\u4e3b")),f.a.createElement("li",null,f.a.createElement("i",{className:"iconfont icon-wode"}),f.a.createElement("span",null,"\u4e2a\u4eba\u8d44\u6599")),f.a.createElement("li",null,f.a.createElement("i",{className:"iconfont icon-kefu"}),f.a.createElement("span",null,"\u8054\u7cfb\u6211\u4eec"))),f.a.createElement("div",{className:"join"},f.a.createElement("img",{src:d.a,alt:""})))}}]),a}(p.Component);a.default=k}}]);
//# sourceMappingURL=8.0d4d6628.chunk.js.map