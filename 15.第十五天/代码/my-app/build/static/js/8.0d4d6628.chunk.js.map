{"version":3,"sources":["assets/images/avatar02.png","assets/images/join.png","pages/user/user.jsx"],"names":["module","exports","User","props","fnGetUserInfo","a","async","localStorage","getItem","axios","get","oRes","data","status","body","setState","avatar","nickname","bIsLogin","fnLogOut","alert","text","onPress","post","removeItem","state","this","className","src","BASE_URL","alt","onClick","avatar02","history","push","join","Component"],"mappings":"iHAAAA,EAAOC,QAAU,IAA0B,sC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,mMCWrCC,E,YACF,WAAYC,GAAO,IAAD,8BACd,4CAAMA,KAYVC,cAAc,gCAAAC,EAAAC,OAAA,oDACEC,aAAaC,QAAQ,eADvB,kCAAAH,EAAA,MAGW,EAAKI,MAAMC,IAAI,UAH1B,OAGFC,EAHE,SAIiBA,EAAKC,KAAtBC,EAJA,EAIAA,OAAQC,EAJR,EAIQA,KAED,MAATD,GACA,EAAKE,SAAS,CACVC,OAAOF,EAAKE,OACZC,SAASH,EAAKG,SACdC,UAAS,IAVX,sCAbI,EA8BlBC,SAAS,WACL,IAAMC,MAAM,2BAAQ,wCAAW,CAC3B,CAAEC,KAAM,gBACR,CAAEA,KAAM,eAAMC,QAAS,0BAAAjB,EAAAC,OAAA,kEAAAD,EAAA,MACF,EAAKI,MAAMc,KAAK,iBADd,OACfZ,EADe,OAKN,MAFIA,EAAKC,KAAhBC,SAGF,EAAKE,SAAS,CACVC,OAAO,GACPC,SAAS,GACTC,UAAS,IAGbX,aAAaiB,WAAW,gBAZT,0CA/B3B,EAAKC,MAAQ,CACTT,OAAO,GACPC,SAAS,GACTC,UAAS,GALC,E,iFAUdQ,KAAKtB,kB,+BAyCC,IAAD,SAC6BsB,KAAKD,MAAlCP,EADA,EACAA,SAASF,EADT,EACSA,OAAOC,EADhB,EACgBA,SACrB,OACI,yBAAKU,UAAU,aACX,yBAAKA,UAAU,eAEPT,EACI,yBAAKS,UAAU,eACX,yBAAKC,IAAMC,IAAUb,EAAQc,IAAI,KACjC,yBAAKH,UAAU,QAAQV,GACvB,0BAAMU,UAAU,UAAUI,QAASL,KAAKP,UAAxC,iBAGJ,yBAAKQ,UAAU,eACX,yBAAKC,IAAKI,IAAUF,IAAI,KACxB,yBAAKH,UAAU,QAAf,gBACA,0BAAMA,UAAU,UAAUI,QAAU,kBAAI,EAAK5B,MAAM8B,QAAQC,KAAK,YAAhE,wBAMhB,wBAAIP,UAAU,YACV,4BACI,uBAAGA,UAAU,2BACb,2DAEJ,4BACI,uBAAGA,UAAU,uBACb,2DAEJ,4BACI,uBAAGA,UAAU,0BACb,2DAEJ,4BACI,uBAAGA,UAAU,2BACb,2DAEJ,4BACI,uBAAGA,UAAU,uBACb,2DAEJ,4BACI,uBAAGA,UAAU,uBACb,4DAGR,yBAAKA,UAAU,QACX,yBAAKC,IAAKO,IAAML,IAAI,W,GArGrBM,aA4GJlC","file":"static/js/8.0d4d6628.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/avatar02.ab24c092.png\";","module.exports = __webpack_public_path__ + \"static/media/join.60f81205.png\";","import React, { Component } from 'react';\r\nimport './user.css';\r\n\r\nimport avatar02 from '../../assets/images/avatar02.png';\r\nimport join from '../../assets/images/join.png';\r\n\r\nimport { BASE_URL } from '../../utils';\r\n\r\n// 导入对话弹框\r\nimport { Modal } from 'antd-mobile';\r\n\r\nclass User extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            avatar:'',\r\n            nickname:'',\r\n            bIsLogin:false\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.fnGetUserInfo();\r\n    }\r\n\r\n    fnGetUserInfo=async ()=>{\r\n        let token = localStorage.getItem('haoke_token');\r\n        if( token ){            \r\n            let oRes = await this.axios.get('/user');        \r\n            let { status, body } = oRes.data;\r\n            \r\n            if( status===200 ){\r\n                this.setState({\r\n                    avatar:body.avatar,\r\n                    nickname:body.nickname,\r\n                    bIsLogin:true\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    fnLogOut=()=>{\r\n        Modal.alert('用户退出', '你确认退出吗?', [\r\n            { text: '取消' },\r\n            { text: '确定', onPress: async () => {                \r\n                let oRes = await this.axios.post('/user/logout')\r\n                \r\n                let { status } = oRes.data;\r\n\r\n                if( status===200 ){\r\n                    this.setState({\r\n                        avatar:'',\r\n                        nickname:'',\r\n                        bIsLogin:false\r\n                    })\r\n\r\n                    localStorage.removeItem('haoke_token');\r\n                }\r\n            }}\r\n        ])       \r\n    }\r\n\r\n    render() {\r\n        let{ bIsLogin,avatar,nickname } = this.state;\r\n        return (\r\n            <div className=\"user_wrap\">\r\n                <div className=\"user_header\">\r\n                    {\r\n                        bIsLogin?(\r\n                            <div className=\"info_pannel\">\r\n                                <img src={ BASE_URL+ avatar} alt=\"\" />\r\n                                <div className=\"role\">{nickname}</div>\r\n                                <span className=\"gologin\" onClick={this.fnLogOut }>退出</span>\r\n                            </div>\r\n                        ):(\r\n                            <div className=\"info_pannel\">\r\n                                <img src={avatar02} alt=\"\" />\r\n                                <div className=\"role\">游客</div>\r\n                                <span className=\"gologin\" onClick={ ()=>this.props.history.push('/login') }>去登录</span>\r\n                            </div>\r\n                        )\r\n                    }\r\n\r\n                </div>\r\n                <ul className=\"opt_list\">\r\n                    <li>\r\n                        <i className=\"iconfont icon-shoucang\"></i>\r\n                        <span>我的收藏</span>\r\n                    </li>\r\n                    <li>\r\n                        <i className=\"iconfont icon-home\"></i>\r\n                        <span>我的出租</span>\r\n                    </li>\r\n                    <li>\r\n                        <i className=\"iconfont icon-shijian\"></i>\r\n                        <span>看房记录</span>\r\n                    </li>\r\n                    <li>\r\n                        <i className=\"iconfont icon-fangdong\"></i>\r\n                        <span>成为房主</span>\r\n                    </li>\r\n                    <li>\r\n                        <i className=\"iconfont icon-wode\"></i>\r\n                        <span>个人资料</span>\r\n                    </li>\r\n                    <li>\r\n                        <i className=\"iconfont icon-kefu\"></i>\r\n                        <span>联系我们</span>\r\n                    </li>\r\n                </ul>\r\n                <div className=\"join\">\r\n                    <img src={join} alt=\"\" />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default User;"],"sourceRoot":""}