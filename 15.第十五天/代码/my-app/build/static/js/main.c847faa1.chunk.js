(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[1],{129:function(e,t,a){e.exports=a(229)},134:function(e,t,a){},171:function(e,t,a){},179:function(e,t,a){},209:function(e,t,a){},210:function(e,t){!function(){var e=function(){var e=document.documentElement,t=e.clientWidth;e.style.fontSize=t/375*20+"px"};e(),window.addEventListener("resize",e)}()},211:function(e,t,a){},229:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),o=a.n(c),i=a(19),l=a(20),s=a(23),u=a(21),m=a(24),f=a(17),h=a(33),y=(a(134),a(128),a(87)),p=a.n(y),b=a(15),d=a.n(b),E=(a(171),a(43)),g=a(25),C=a(99),v=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).fnStoreChange=function(){a.setState({sCurrentCityName:g.a.getState().label})},a.fnShowCity=function(e){a.setState({sClass:e})},a.state={sCurrentCityName:g.a.getState().label,sClass:"city_wrap"},a.unsubscribe=g.a.subscribe(a.fnStoreChange),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"componentDidMount",value:function(){var e=this,t=sessionStorage.getItem("haoke_current_city");if(t){var a=JSON.parse(t);g.a.dispatch({type:"change_city",value:a})}else{(new window.BMap.LocalCity).get((function(t){var a,n;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a=t.name,r.next=3,d.a.awrap(e.axios.get("/area/info?name="+a));case 3:n=r.sent,g.a.dispatch({type:"change_city",value:n.data.body}),sessionStorage.setItem("haoke_current_city",JSON.stringify(n.data.body));case 6:case"end":return r.stop()}}))}))}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"search_bar"},r.a.createElement("div",{className:"search_con"},r.a.createElement("span",{className:"city",onClick:function(){e.fnShowCity("city_wrap slideUp")}},this.state.sCurrentCityName),r.a.createElement("i",{className:"iconfont icon-xialajiantouxiangxia"}),r.a.createElement("span",{className:"village"},r.a.createElement("i",{className:"iconfont icon-fangdajing"})," \u8bf7\u8f93\u5165\u5c0f\u533a\u540d")),r.a.createElement("i",{className:"iconfont icon-ic-maplocation-o tomap",onClick:function(){return e.props.history.push("/map")}}),r.a.createElement(C.a,{sClass:this.state.sClass,fnShowCity:this.fnShowCity}))}}]),t}(n.Component),O=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:[]},a.fnGetData=function(){var e;return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.awrap(a.axios.get("/home/swiper"));case 2:e=t.sent,a.setState({data:e.data.body});case 4:case"end":return t.stop()}}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fnGetData()}},{key:"render",value:function(){return r.a.createElement("div",{className:"slide_con"},this.state.data.length>0&&r.a.createElement(p.a,{autoplay:!0,infinite:!0},this.state.data.map((function(e){return r.a.createElement("a",{key:e.id,href:"http://www.itcast.cn",style:{display:"inline-block",width:"100%",height:"10.6rem"}},r.a.createElement("img",{src:E.a+e.imgSrc,alt:"",style:{width:"100%",verticalAlign:"top"}}))}))))}}]),t}(n.Component),S=function(e){return r.a.createElement("ul",{className:"menu_con"},r.a.createElement("li",null,r.a.createElement(f.b,{to:"#/"},r.a.createElement("i",{className:"iconfont icon-zufang1"})),r.a.createElement("h4",null,"\u6574\u79df")),r.a.createElement("li",null,r.a.createElement(f.b,{to:"#/"},r.a.createElement("i",{className:"iconfont icon-usergroup"})),r.a.createElement("h4",null,"\u5408\u79df")),r.a.createElement("li",null,r.a.createElement(f.b,{to:"/map"},r.a.createElement("i",{className:"iconfont icon-ic-maplocation-o"})),r.a.createElement("h4",null,"\u5730\u56fe\u627e\u623f")),r.a.createElement("li",null,r.a.createElement(f.b,{to:"/rent"},r.a.createElement("i",{className:"iconfont icon-zufang"})),r.a.createElement("h4",null,"\u53bb\u51fa\u79df")))},w=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={aList:[]},a.fnGetData=function(){var e;return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.awrap(a.axios.get("/home/groups?area=AREA%7C88cff55c-aaa4-e2e0"));case 2:e=t.sent,a.setState({aList:e.data.body});case 4:case"end":return t.stop()}}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fnGetData()}},{key:"render",value:function(){var e=this.state.aList;return r.a.createElement("div",{className:"model2"},r.a.createElement("div",{className:"title_con"},r.a.createElement("h3",null,"\u79df\u623f\u5c0f\u7ec4"),r.a.createElement(f.b,{to:"/",className:"iconfont icon-next"})),r.a.createElement("ul",{className:"house_list"},e.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("p",{className:"fl"},e.title),r.a.createElement("img",{src:E.a+e.imgSrc,alt:"",className:"fr"}),r.a.createElement("span",{className:"fl"},e.desc))}))))}}]),t}(n.Component),j=Object(h.g)(v),k=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(j,null),r.a.createElement(O,null),r.a.createElement(S,null),r.a.createElement(w,null))}}]),t}(n.Component),x=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(7)]).then(a.bind(null,531))})),N=Object(n.lazy)((function(){return a.e(14).then(a.bind(null,529))})),_=Object(n.lazy)((function(){return Promise.all([a.e(6),a.e(8)]).then(a.bind(null,530))}));function R(e){var t=e.label,a=e.to,n=e.exact,c=e.sClass;return r.a.createElement(h.b,{path:a,exact:n,children:function(e){var n=e.match;return r.a.createElement("li",{className:n?"active":""},r.a.createElement(f.b,{to:a,className:"iconfont "+c}),r.a.createElement("h4",null,t))}})}var I=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(h.b,{exact:!0,path:"/layout",component:k}),r.a.createElement(h.b,{path:"/layout/houselist",component:x}),r.a.createElement(h.b,{path:"/layout/info",component:N}),r.a.createElement(h.b,{path:"/layout/user",component:_}),r.a.createElement("footer",null,r.a.createElement("ul",null,r.a.createElement(R,{label:"\u9996\u9875",to:"/layout",exact:!0,sClass:"icon-home1"}),r.a.createElement(R,{label:"\u627e\u623f",to:"/layout/houselist",sClass:"icon-ziyuan"}),r.a.createElement(R,{label:"\u8d44\u8baf",to:"/layout/info",sClass:"icon-zixun"}),r.a.createElement(R,{label:"\u6211\u7684",to:"/layout/user",sClass:"icon-wode"}))))}}]),t}(n.Component),z=Object(n.lazy)((function(){return a.e(11).then(a.bind(null,524))})),L=Object(n.lazy)((function(){return a.e(9).then(a.bind(null,525))})),J=Object(n.lazy)((function(){return Promise.all([a.e(4),a.e(10)]).then(a.bind(null,526))})),D=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(5),a.e(12)]).then(a.bind(null,527))})),A=Object(n.lazy)((function(){return a.e(13).then(a.bind(null,528))})),K=Object(h.g)(D),G=Object(h.g)(J),T=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/layout",component:I}),r.a.createElement(h.b,{path:"/map",component:z}),r.a.createElement(h.b,{path:"/login",component:J}),r.a.createElement(h.b,{path:"/zlist",component:A}),r.a.createElement(h.b,{path:"/rent",render:function(){return localStorage.getItem("haoke_token")?r.a.createElement(K,null):r.a.createElement(G,null)}}),r.a.createElement(h.b,{path:"/detail/:houseCode",component:L}),r.a.createElement(h.a,{exact:!0,from:"/",to:"/layout"}))))}}]),t}(n.Component),U=(a(209),a(210),a(211),a(212),a(58)),H=a.n(U);H.a.defaults.baseURL=E.a;var M=["/user","/user/logout","/user/houses"];H.a.interceptors.request.use((function(e){var t=e.url,a=localStorage.getItem("haoke_token");return a&&M.includes(t)&&(e.headers.authorization=a),e}),(function(e){return Promise.reject(e)})),n.Component.prototype.axios=H.a,o.a.render(r.a.createElement(T,null),document.getElementById("root"))},25:function(e,t,a){"use strict";var n=a(118),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{label:"\u6df1\u5733",value:"AREA|a6649a11-be98-b150"},t=arguments.length>1?arguments[1]:void 0;return"change_city"===t.type?t.value:e},c=Object(n.a)(r);t.a=c},43:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n="http://183.237.67.218:3001"},99:function(e,t,a){"use strict";a(126);var n=a(60),r=a.n(n),c=a(15),o=a.n(c),i=a(19),l=a(20),s=a(23),u=a(21),m=a(24),f=a(0),h=a.n(f),y=(a(179),a(25)),p=a(79);function b(e){var t={};e.map((function(e){var a=e.short.substr(0,1);a in t?t[a].push(e):t[a]=[e]}));var a=Object.keys(t).sort();return{oCityList:t,aCityKey:a}}var d=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).fnStoreChange=function(){a.setState({oCurrentCity:y.a.getState()},(function(){a.setState((function(e){var t=e.oCityList;return t["#"]=[e.oCurrentCity],{oCityList:t}}))}))},a.fnGetData=function(){var e,t,n,r,c,i,l,s,u;return o.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(e=localStorage.getItem("haoke_city_list"),t={},!e){m.next=6;break}t=JSON.parse(e),m.next=11;break;case 6:return m.next=8,o.a.awrap(a.axios.get("/area/city?level=1"));case 8:n=m.sent,localStorage.setItem("haoke_city_list",JSON.stringify(n.data.body)),t=n.data.body;case 11:if(r=b(t),c=r.oCityList,i=r.aCityKey,l=localStorage.getItem("haoke_hot_city_list"),s={},!l){m.next=18;break}s=JSON.parse(l),m.next=23;break;case 18:return m.next=20,o.a.awrap(a.axios.get("/area/hot"));case 20:u=m.sent,localStorage.setItem("haoke_hot_city_list",JSON.stringify(u.data.body)),s=u.data.body;case 23:c.hot=s,i.unshift("hot"),c["#"]=[a.state.oCurrentCity],i.unshift("#"),a.setState({oCityList:c,aCityKey:i});case 28:case"end":return m.stop()}}))},a.rowRenderer=function(e){var t,n=e.key,r=e.index,c=e.style,o=a.state.aCityKey[r],i=a.state.oCityList[o];return h.a.createElement("div",{className:"city_group",key:n,style:c},h.a.createElement("h4",null,"#"===(t=o)?"\u5f53\u524d\u57ce\u5e02":"hot"===t?"\u70ed\u95e8\u57ce\u5e02":t.toUpperCase()),h.a.createElement("ul",null,i.map((function(e){return h.a.createElement("li",{key:e.value,onClick:function(){return a.fnChangeCity(e.label)}},e.label)}))))},a.fnChangeCity=function(e){var t,n,c;return o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e!==a.state.oCurrentCity.label){i.next=3;break}return r.a.info("\u5f53\u524d\u57ce\u5e02\u5df2\u9009\uff01",2),i.abrupt("return");case 3:if(t=localStorage.getItem("haoke_test_city"+e),n={},!t){i.next=9;break}n=JSON.parse(t),i.next=14;break;case 9:return i.next=11,o.a.awrap(a.axios.get("/area/info?name="+e));case 11:c=i.sent,localStorage.setItem("haoke_test_city"+e,JSON.stringify(c.data.body)),n=c.data.body;case 14:"\u4e0a\u6d77"!==e&&"\u4e0a\u6d77"===n.label?r.a.info("\u5f53\u524d\u57ce\u5e02\u6ca1\u6709\u6570\u636e\uff0c\u8bf7\u6362\u4e00\u4e2a\u57ce\u5e02\uff01",2):(y.a.dispatch({type:"change_city",value:n}),sessionStorage.setItem("haoke_current_city",JSON.stringify(n)),a.props.fnShowCity("city_wrap"));case 15:case"end":return i.stop()}}))},a.rowHeightCount=function(e){var t=e.index,n=a.state.aCityKey[t];return 40+58*a.state.oCityList[n].length},a.fnScrollToRow=function(e){a.bIsScrolling=!1,a.oRef.current.scrollToRow(e),a.setState({iCurrent:e}),setTimeout((function(){a.bIsScrolling=!0}),200)},a.onRowsRendered=function(e){var t=e.startIndex;a.bIsScrolling&&a.setState({iCurrent:t})},a.onScroll=function(e){e.scrollHeight-(e.scrollTop+e.clientHeight)<1&&a.setState({iCurrent:a.state.aCityKey.length-1})},a.state={oCityList:{},aCityKey:[],oCurrentCity:y.a.getState(),iCurrent:0},a.oRef=h.a.createRef(),a.unsubscribe=y.a.subscribe(a.fnStoreChange),a.bIsScrolling=!0,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"componentDidMount",value:function(){this.fnGetData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.iCurrent,n=t.aCityKey;return h.a.createElement("div",{className:this.props.sClass},h.a.createElement("div",{className:"city_title"},h.a.createElement("span",{className:"shutoff iconfont icon-shut",onClick:function(){e.props.fnShowCity("city_wrap")}}),h.a.createElement("h3",null,"\u9009\u62e9\u57ce\u5e02")),h.a.createElement("div",{className:"group_con"},h.a.createElement(p.a,null,(function(t){var a=t.height,r=t.width;return h.a.createElement(p.c,{ref:e.oRef,width:r,height:a,rowCount:n.length,rowHeight:e.rowHeightCount,rowRenderer:e.rowRenderer,scrollToAlignment:"start",onRowsRendered:e.onRowsRendered,onScroll:e.onScroll})}))),h.a.createElement("ul",{className:"city_index"},n.map((function(t,n){return h.a.createElement("li",{className:a===n?"active":"",key:t,onClick:function(){return e.fnScrollToRow(n)}},h.a.createElement("span",null,"hot"===t?"\u70ed":t.toUpperCase()))}))))}}]),t}(f.Component);t.a=d}},[[129,2,3]]]);
//# sourceMappingURL=main.c847faa1.chunk.js.map