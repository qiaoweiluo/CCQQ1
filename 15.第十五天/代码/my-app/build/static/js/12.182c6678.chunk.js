(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[12],{508:function(e,a,t){},527:function(e,a,t){"use strict";t.r(a);t(473);var n=t(476),l=t.n(n),s=(t(477),t(481)),r=t.n(s),c=(t(485),t(488)),i=t.n(c),o=(t(282),t(497)),u=t.n(o),m=(t(499),t(501)),f=t.n(m),p=(t(126),t(60)),h=t.n(p),d=t(15),y=t.n(d),b=t(333),E=t(19),v=t(20),g=t(23),C=t(21),N=t(24),k=t(0),_=t.n(k),O=(t(508),t(25)),S=[{label:"\u4e00\u5ba4",value:"ROOM|d4a692e4-a177-37fd"},{label:"\u4e8c\u5ba4",value:"ROOM|d1a00384-5801-d5cd"},{label:"\u4e09\u5ba4",value:"ROOM|20903ae0-c7bc-f2e2"},{label:"\u56db\u5ba4",value:"ROOM|ce2a5daa-811d-2f49"},{label:"\u56db\u5ba4+",value:"ROOM|2731c38c-5b19-ff7f"}],w=[{label:"\u4e1c",value:"ORIEN|141b98bf-1ad0-11e3"},{label:"\u897f",value:"ORIEN|103fb3aa-e8b4-de0e"},{label:"\u5357",value:"ORIEN|61e99445-e95e-7f37"},{label:"\u5317",value:"ORIEN|caa6f80b-b764-c2df"},{label:"\u4e1c\u5357",value:"ORIEN|dfb1b36b-e0d1-0977"},{label:"\u4e1c\u5317",value:"ORIEN|67ac2205-7e0f-c057"},{label:"\u897f\u5357",value:"ORIEN|2354e89e-3918-9cef"},{label:"\u897f\u5317",value:"ORIEN|80795f1a-e32f-feb9"}],I=[{label:"\u9ad8\u697c\u5c42",value:"FLOOR|1"},{label:"\u4e2d\u697c\u5c42",value:"FLOOR|2"},{label:"\u4f4e\u697c\u5c42",value:"FLOOR|3"}],R=[{key:"\u8863\u67dc",sClass:"iconfont icon-yigui"},{key:"\u6d17\u8863\u673a",sClass:"iconfont icon-xiyiji"},{key:"\u7a7a\u8c03",sClass:"iconfont icon-kongtiao"},{key:"\u5929\u7136\u6c14",sClass:"iconfont icon-tianranqi"},{key:"\u51b0\u7bb1",sClass:"iconfont icon-bingxiang"},{key:"\u7535\u89c6",sClass:"iconfont icon-dianshi"},{key:"\u70ed\u6c34\u5668",sClass:"iconfont icon-reshuiqi"},{key:"\u6c99\u53d1",sClass:"iconfont icon-shafa"},{key:"\u6696\u6c14",sClass:"iconfont icon-nuanqi"},{key:"\u5bbd\u5e26",sClass:"iconfont icon-_huabanfuben"}],x=function(e){function a(){var e,t;Object(E.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(t=Object(g.a)(this,(e=Object(C.a)(a)).call.apply(e,[this].concat(l)))).state={tempSlides:[],communitylist:[],community:{},price:"",size:"",roomType:"",floor:"",oriented:"",title:"",houseImg:"",supporting:[],description:"",sKey:"",sClass:"search_key_pannel",sCurrntCity:O.a.getState().value},t.getValue=function(e,a){t.setState(Object(b.a)({},e,a))},t.handleImage=function(e){t.setState({tempSlides:e})},t.fnSetSupport=function(e){t.setState((function(a){var t=JSON.parse(JSON.stringify(a.supporting));return t.includes(e)?{supporting:t.filter((function(a){return a!==e}))}:(t.push(e),{supporting:t})}))},t.fnShowSearchPannel=function(){t.setState((function(e){return"search_key_pannel"===e.sClass?{sClass:"search_key_pannel search_slide_up"}:{sClass:"search_key_pannel"}}))},t.fnGetcommunity=function(e){var a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.a.awrap(t.axios.get("/area/community",{params:{name:e,id:t.state.sCurrntCity}}));case 2:a=n.sent,t.setState({communitylist:a.data.body});case 4:case"end":return n.stop()}}))},t.fnSetCommunity=function(e){t.setState({community:e},(function(){t.fnShowSearchPannel()}))},t.fnAddHouse=function(){var e,a,n,l,s,r,c,i,o,u,m,f,p,d,b;return y.a.async((function(E){for(;;)switch(E.prev=E.next){case 0:if(e=t.state,a=e.tempSlides,n=e.houseImg,l=e.title,s=e.description,r=e.oriented,e.supporting,c=e.price,i=e.roomType,o=e.size,u=e.floor,e.community,!(a.length<=0)){E.next=4;break}return h.a.info("\u8bf7\u4e0a\u4f20\u623f\u5c4b\u56fe\u7247\u5728\u53d1\u5e03\uff01",2),E.abrupt("return");case 4:return m=new FormData,a.map((function(e){m.append("file",e.file)})),E.next=8,y.a.awrap(t.axios.post("/houses/image",m,{headers:{"content-type":"multipart/form-data"}}));case 8:return f=E.sent,n=f.data.body.join("|"),p=t.state.supporting.join("|"),d=t.state.community.community,E.next=14,y.a.awrap(t.axios.post("/user/houses",{houseImg:n,title:l,description:s,oriented:r,supporting:p,price:c,roomType:i,size:o,floor:u,community:d}));case 14:b=E.sent,200===b.data.status&&h.a.info("\u53d1\u5e03\u623f\u6e90\u6210\u529f\uff01",2,(function(){t.props.history.push("/zlist")}));case 17:case"end":return E.stop()}}))},t}return Object(N.a)(a,e),Object(v.a)(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.community,n=a.communitylist,s=a.price,c=a.roomType,o=a.floor,m=a.oriented,p=a.description,h=a.tempSlides,d=a.title,y=a.size,b=a.supporting,E=a.sKey,v=a.sClass;return _.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:"rent_wrap"},_.a.createElement("div",{className:"rent_title"},_.a.createElement("span",{className:"back iconfont icon-prev",onClick:function(){return e.props.history.goBack()}}),_.a.createElement("h3",null,"\u53d1\u5e03\u623f\u6e90")),_.a.createElement("h3",{className:"rent_sub_title"},"\u623f\u6e90\u4fe1\u606f"),_.a.createElement("div",{className:"options"},_.a.createElement("div",{className:"select_bar",onClick:this.fnShowSearchPannel},_.a.createElement("span",{className:"fl"},"\u5c0f\u533a\u540d\u79f0"),_.a.createElement("i",{className:"iconfont icon-next fr"}),_.a.createElement("b",{className:"fr"},t.communityName)),_.a.createElement(f.a,{placeholder:"\u8bf7\u8f93\u5165\u79df\u91d1/\u6708",extra:"\xa5/\u6708",value:s,onChange:function(a){return e.getValue("price",a)}},"\u79df\u91d1"),_.a.createElement(f.a,{placeholder:"\u8bf7\u8f93\u5165\u5efa\u7b51\u9762\u79ef",extra:"\u33a1",value:y,onChange:function(a){return e.getValue("size",a)}},"\u5efa\u7b51\u9762\u79ef"),_.a.createElement(i.a,{data:S,value:[c],cols:1,onChange:function(a){return e.getValue("roomType",a[0])}},_.a.createElement(u.a.Item,{arrow:"horizontal"},"\u6237\u578b")),_.a.createElement(i.a,{data:I,value:[o],cols:1,onChange:function(a){return e.getValue("floor",a[0])}},_.a.createElement(u.a.Item,{arrow:"horizontal"},"\u6240\u5728\u697c\u5c42")),_.a.createElement(i.a,{data:w,value:[m],cols:1,onChange:function(a){return e.getValue("oriented",a[0])}},_.a.createElement(u.a.Item,{arrow:"horizontal"},"\u671d\u5411"))),_.a.createElement("h3",{className:"rent_sub_title2"},"\u623f\u5c4b\u6807\u9898"),_.a.createElement(f.a,{placeholder:"\u8bf7\u8f93\u5165\u623f\u5c4b\u6807\u9898",value:d,onChange:function(a){return e.getValue("title",a)}}),_.a.createElement("h3",{className:"rent_sub_title2"},"\u623f\u5c4b\u56fe\u50cf"),_.a.createElement(r.a,{files:h,multiple:!0,onChange:this.handleImage}),_.a.createElement("h3",{className:"rent_sub_title2"},"\u623f\u5c4b\u914d\u7f6e"),_.a.createElement("ul",{className:"detail_support_list"},R.map((function(a,t){return _.a.createElement("li",{key:t,className:b.includes(a.key)?"active":"",onClick:function(){return e.fnSetSupport(a.key)}},_.a.createElement("i",{className:a.sClass}),_.a.createElement("b",null,a.key))}))),_.a.createElement("h3",{className:"rent_sub_title2"},"\u623f\u5c4b\u63cf\u8ff0"),_.a.createElement(l.a,{rows:5,placeholder:"\u8bf7\u8f93\u5165\u623f\u5c4b\u63cf\u8ff0\u4fe1\u606f",autoHeight:!0,value:p,onChange:function(a){return e.getValue("description",a)}}),_.a.createElement("div",{className:"down_btns"},_.a.createElement("span",null,"\u53d6\u6d88"),_.a.createElement("b",{onClick:this.fnAddHouse},"\u786e\u5b9a"))),_.a.createElement("div",{className:v},_.a.createElement("div",{className:"search_key_header"},_.a.createElement("div",{className:"search_input"},_.a.createElement(f.a,{placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u8bcd",value:E,onChange:function(a){return e.getValue("sKey",a)}})),""!==E?_.a.createElement("div",{className:"search_btn",onClick:function(){return e.fnGetcommunity(E)}},"\u641c\u7d22"):_.a.createElement("div",{className:"search_btn",onClick:this.fnShowSearchPannel},"\u53d6\u6d88"),_.a.createElement("ul",{className:"search_res_list"},n.map((function(a){return _.a.createElement("li",{key:a.community,onClick:function(){return e.fnSetCommunity(a)}},a.communityName)}))))))}}]),a}(k.Component);a.default=x}}]);
//# sourceMappingURL=12.182c6678.chunk.js.map